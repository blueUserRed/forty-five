
use Common;

var advancedTextPartSharedKeys = {
    actions?: $AdvancedTextPartAction[]
};


$NextDialogPartSelector {

    $Continue { }

    $FixedNextPart {
        next: int
    }

    $ChooseNextPart {
        choices: {
            name: string,
            next: int
        }[]
    }

    $EndOfDialog {
        changeToScreen: string
    }
}


var advancedTextEffectSharedKeys = {
    indicator: string,
};

$AdvancedTextEffect {

    $Color {
        color: Color,
        ...advancedTextEffectSharedKeys
    }

    $Font {
        font: string,
        ...advancedTextEffectSharedKeys
    }

    $FontScale {
        fontScale: float,
        ...advancedTextEffectSharedKeys
    }

    $Action {
        actions: $AdvancedTextPartAction[],
        ...advancedTextEffectSharedKeys
    }
//    $Icon { //TODO icons, maybe like this, maybe part of the text
//        icon: string,
//        ...advancedTextPartSharedKeys
//    }

}

$AdvancedTextPartAction {

    $ShakeTextAction {
        xMagnitude: float,
        xSpeed: float,
        yMagnitude: float,
        ySpeed: float,
    }
}

var dialog = {
    parts: {
        rawText: string,
        effects?: $AdvancedTextEffect[],
        next: $NextDialogPartSelector
    }[],
    defaults: {
        font: string,
        fontScale: float,
        color: Color
    },
};

var image = {
        textureName: string,
        offsetX?: float,
        offsetY?: float,
        scale: float,
};

npcs: {
    name: string,
    dialog: dialog,
    image: image,
}[]
