import "imports/colors.onj" as color;
import "screens/input_maps.onj" as inputMaps;
import "config/graphics_config.onj" as graphicsConfig;

use Common;
use Screen;
use Style;

var worldWidth = 160.0;
var worldHeight = 90.0;


assets: {
    useAssets: [
        "title_screen_background", "key_select_frame", "white_texture", "black_texture", "enemy_texture", "red_wing",
        "normal_bullet", "grey_texture", "heart_texture", "burning_icon", "white_rounded"
    ]
},

viewport: $FitViewport {
    worldWidth: worldWidth,
    worldHeight: worldHeight
},

options: {
    background: "title_screen_background",
    inputMap: [
        ...(inputMaps.defaultInputMap)
    ]
},

root: $Box {
    properties: [
        relWidth(100.0),
        relHeight(100.0),
        flexDirection("column"),
        justifyContent("center")
    ]
} children [

    $Map {
        properties: [
            relWidth(100.0),
            relHeight(100.0),
            position("absolute")
        ],
        //        detailMapProvider: $CurrentMapProvider { },

        detailMapProvider: $FromSeededGeneratorDetailMapProvider {
            seed: 100
        },
        nodeSize: 5.0,
        lineWidth: 1.0,
        name: "map",
        nodeTexture: "key_select_frame",
        playerTexture: "enemy_texture",
        playerWidth: 2.0,
        playerHeight: 6.0,
        background: "white_texture",
        edgeTexture: "black_texture",
        playerMovementTime: 0.3,
        directionIndicator: "heart_texture",
        detailWidgetName: "mapEventDetail"
    },

    $MapEventDetail {
        properties: [
            alignSelf("flex end"),
            relHeight(70.0),
            relWidth(20.0),
            positionTo(25.0, null, null, null, 0.2, interpolation.linear),
            positionTo(0.0, null, null, null, 0.2, interpolation.linear) condition state("displayEventDetail"),
        ],
        name: "mapEventDetail",
        font: "red_wing",
        fontColor: color.black,
        background: "white_rounded",
    }

]
